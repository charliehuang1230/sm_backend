#################################################################
# P6Spy SQL 監控配置文件
# P6Spy 是一個 JDBC 代理，可以攔截並記錄所有 SQL 語句
#################################################################

# 模塊列表（啟用哪些模塊）
modulelist=com.p6spy.engine.logging.P6LogFactory,com.p6spy.engine.outage.P6OutageFactory

# 實際的 JDBC 驅動程式列表
# P6Spy 會代理這些驅動程式
driverlist=org.postgresql.Driver,com.mysql.cj.jdbc.Driver,oracle.jdbc.OracleDriver,com.microsoft.sqlserver.jdbc.SQLServerDriver

# 日誌輸出格式
# SingleLineFormat: 單行格式
# MultiLineFormat: 多行格式（更易閱讀）
# CustomLineFormat: 自定義格式
logMessageFormat=com.p6spy.engine.spy.appender.MultiLineFormat

# 自定義日誌格式（如果使用 CustomLineFormat）
#customLogMessageFormat=%(currentTime)|%(executionTime)|%(category)|connection%(connectionId)|%(sqlSingleLine)

# 日誌輸出方式
# Slf4JLogger: 使用 SLF4J 輸出（推薦，與應用日誌統一）
# StdoutLogger: 輸出到標準輸出
# FileLogger: 輸出到文件
appender=com.p6spy.engine.spy.appender.Slf4JLogger

# 如果使用 FileLogger，指定日誌文件路徑
#logfile=spy.log

# 日期格式
dateformat=yyyy-MM-dd HH:mm:ss.SSS

# 是否記錄二進制數據（如 blob）
#excludebinary=false

# 慢查詢閾值（毫秒）
# 超過此時間的 SQL 會被標記為慢查詢
# 設為 0 表示記錄所有查詢
outagedetection=true
outagedetectioninterval=2000

# 排除的 SQL 類別（不記錄）
# info: 包含結果集信息
# debug: 調試信息
# result: 結果集內容
# batch: 批處理
# commit: 提交
# rollback: 回滾
#excludecategories=info,debug,result,resultset,batch

# 包含的 SQL 類別（只記錄這些）
# statement: 常規語句
# prepared: 預編譯語句
# callable: 存儲過程調用
# error: 錯誤
#includecategories=error,statement,prepared

# SQL 過濾（支持正則表達式）
# 只記錄匹配的 SQL
#filter=true
#include=.*SELECT.*
#exclude=.*INFORMATION_SCHEMA.*

# 是否記錄空結果集
#autoflush=true

# 是否在 SQL 中顯示實際的參數值（而不是 ?）
# 已包含在 MultiLineFormat 中
#reloadproperties=false
#reloadpropertiesinterval=-1

# JMX 監控（可選）
#jmx=true
#jmxPrefix=p6spy

# 堆疊追蹤過濾（顯示哪些類調用了 SQL）
# 有助於追蹤 SQL 來源
stacktrace=false
#stacktraceclass=

# 執行時間單位（毫秒）
#executionThreshold=0
